### КодоЛаба: Ввод и вывод в Go. Интерфейсы.
##### Программирование на Go, Школа Программистов 2019

***

В данной кодолабе вам нужно написать программу, которая будет шифровать и расшировывать файлы с помощью xor-шифрования.

В итоге у вас получится полноценная программа, которая работает с флагами командной строки и файлами.

#### Шаг 0. Что есть сейчас ?

Программа должна уметь зашифровать и расшифровывать файлы. Сейчас она умеет считывать данные с стандартного потока ввода и выводить на стандартный поток вывода.

Проверьте, запустив программу: 

```
$ echo "asd" | go run main.go -encrypt -key a
>> asd 
```

В данный момент шифрование не используется. Это нужно пофиксить.

Для шифрования должна быть использована структура `xorWriter`, для расшифрования `xorReader`.

Ликбез по xor-шифрованию:

Каждый символ p[i] шифруется ключом с помощью исключающего или:

    e[i] = p[i] xor key

Тогда чтобы расшифровать текст e, нужно опять поксорить каждый символ e[i]  ключом:

    p[i] = e[i] xor key

Это работает из-за особенностей операции сложения по модулю 2.


#### Шаг 1. Шифруем и не только.

1. Измените `xorWriter` чтобы использовать ключ шифрования:

    ```
    $ echo "asd" | go run main.go -encrypt -key 0
    >> QCT: 
    ```

    Вывод программы должен быть как показан сверху.
    
    Для этого поменяйте метод `Write` у структуры `xorWriter`(42 строка) и используйте функцию `xor`. 

#### Шаг 2. Выводим в файл.

Обработайте флаг `-out`. Если флаг указан, то вывод должен быть перенаправлен в файл, указанный в флаге.

1. Если флаг `-out` передан, то откройте файл на запись с указаным названием. Проверьте ошибку методом `checkError`
    ```go
       f, err := os.Create(*output)
       defer f.Close()
    ```
 
2. Замените переменную `o` на переменную только что открытого файла `f`.
3. Проверьте работу программы

```
    $ echo "123" | go run main.go -encrypt -key 0 -out test.enc
    $ cat test.enc 
    >> QCT: 
```

#### Шаг 3. Расшифруем?

1. Измените `xorReader` чтобы использовать ключ шифрования:

    ```
    $ echo "QCT" | go run main.go -decrypt -key 0
    >> asd: 
    ```

    Вывод программы должен быть как показан сверху.
    
    Для этого поменяйте метод `Read` у структуры `xorReader`(31 строка) и используйте функцию `xor`. 


#### Шаг 4. Читаем из файла.

Обработайте флаг `-inp`. Если флаг указан, то ввод должен происходить из файла, указанного в флаге.

1. Если флаг `-inp` передан, то откройте файл на чтение с указаным названием. Проверьте ошибку методом `checkError`
    ```go
       f, err := os.Open(*input)
       defer f.Close()
    ```
 
2. Замените переменную `i` на переменную только что открытого файла `f`.
3. Проверьте работу программы

```
    $ go run main.go -decrypt -key 0 -inp test.enc 
    >> asd 
```

#### Шаг 5. На доп оценку / 5+

Измените программу таким образом, чтобы в качестве ключа могла быть строка любой длины, а не 1 байт.
